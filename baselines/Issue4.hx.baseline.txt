original file
-----------------------------------
class A {
    function
    var
    var 
    var foo:
    function f() {
        new
        new Foo<
    }

    // comment
    function foo() {}
}
-----------------------------------

>class A {
 ^^^^^
 source.hx meta.class.hx meta.class.identifier.hx storage.type.class.hx
      ^
      source.hx meta.class.hx meta.class.identifier.hx
       ^
       source.hx meta.class.hx meta.class.identifier.hx entity.name.type.class.hx
        ^
        source.hx meta.class.hx
         ^
         source.hx meta.class.hx punctuation.definition.block.begin.hx
>    function
 ^^^^
 source.hx meta.class.hx meta.block.hx
     ^^^^^^^^
     source.hx meta.class.hx meta.block.hx meta.method.hx storage.type.function.hx
>    var
 ^^^^
 source.hx meta.class.hx meta.block.hx meta.method.hx
     ^^^
     source.hx meta.class.hx meta.block.hx meta.method.hx storage.type.variable.hx
>    var 
 ^^^^
 source.hx meta.class.hx meta.block.hx meta.method.hx
     ^^^
     source.hx meta.class.hx meta.block.hx meta.method.hx storage.type.variable.hx
        ^
        source.hx meta.class.hx meta.block.hx meta.method.hx
>    var foo:
 ^^^^
 source.hx meta.class.hx meta.block.hx meta.method.hx
     ^^^
     source.hx meta.class.hx meta.block.hx meta.method.hx storage.type.variable.hx
        ^
        source.hx meta.class.hx meta.block.hx meta.method.hx
         ^^^
         source.hx meta.class.hx meta.block.hx meta.method.hx variable.other.hx
            ^
            source.hx meta.class.hx meta.block.hx meta.method.hx keyword.operator.type.annotation.hx
>    function f() {
 ^^^^
 source.hx meta.class.hx meta.block.hx meta.method.hx
     ^^^^^^^^
     source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx storage.type.function.hx
             ^
             source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx
              ^
              source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx entity.name.function.hx
               ^
               source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.parameters.hx punctuation.definition.parameters.begin.hx
                ^
                source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.parameters.hx punctuation.definition.parameters.end.hx
                 ^
                 source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx
                  ^
                  source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx punctuation.definition.block.begin.hx
>        new
 ^^^^^^^^
 source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.method.block.hx
         ^^^
         source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.method.block.hx new.expr.hx keyword.operator.new.hx
>        new Foo<
 ^^^^^^^^
 source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.method.block.hx
         ^^^
         source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.method.block.hx new.expr.hx keyword.operator.new.hx
            ^
            source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.method.block.hx new.expr.hx
             ^^^
             source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.method.block.hx new.expr.hx entity.name.type.hx
                ^
                source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.method.block.hx new.expr.hx meta.type-parameters.hx punctuation.definition.typeparameters.begin.hx
>    }
 ^^^^
 source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.method.block.hx
     ^
     source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.method.block.hx punctuation.definition.block.end.hx
>
 ^
 source.hx meta.class.hx meta.block.hx meta.method.hx
>    // comment
 ^^^^
 source.hx meta.class.hx meta.block.hx meta.method.hx
     ^^
     source.hx meta.class.hx meta.block.hx meta.method.hx comment.line.double-slash.hx punctuation.definition.comment.hx
       ^^^^^^^^^
       source.hx meta.class.hx meta.block.hx meta.method.hx comment.line.double-slash.hx
>    function foo() {}
 ^^^^
 source.hx meta.class.hx meta.block.hx meta.method.hx
     ^^^^^^^^
     source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx storage.type.function.hx
             ^
             source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx
              ^^^
              source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx entity.name.function.hx
                 ^
                 source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.parameters.hx punctuation.definition.parameters.begin.hx
                  ^
                  source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.parameters.hx punctuation.definition.parameters.end.hx
                   ^
                   source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx
                    ^
                    source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx punctuation.definition.block.begin.hx
                     ^
                     source.hx meta.class.hx meta.block.hx meta.method.hx meta.method.hx meta.method.block.hx punctuation.definition.block.end.hx
>}
 ^^
 source.hx meta.class.hx meta.block.hx meta.method.hx